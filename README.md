## 커리큘럼
 
---

- [학습목차](https://github.com/miniplugin/human)
- 교사정보: 김일국, boramcom@daum.net, 010-8175-6075
- 학습목표
```
디지털 기술을 기반으로 다양한 기기의 융합, 콘텐츠의 융합을 통해 새로운 형태의 제품이나 융합서비스를 창출합니다.
기기/콘텐츠의 기획/설계/제작/운용/시험을 수행 할 수 있는 4차산업혁명의 핵심적인 과정을 습득합니다.
```
- [목차사용법]깃허브 태그[tag] 클릭, 예) [v1.0.0] <- 아래에서 해당부분 클릭하시면 해당과목으로 이동합니다.  

---

### [v1.0.0](https://github.com/miniplugin/human/tree/v1.0.0) 응용SW기초기술활용 (2001020216_15v3)

- 5월11일~5월19일(50시간) : 사전평가(5월11일) /사후평가(5월19일,2시간)
- 평가항목(수준3) : 사후 + 평가자체크리스트 + 서술형

### [v2.0.0](https://github.com/miniplugin/human/tree/v2.0.0) 화면설계 (2001020224_16v4)

- 5월19일~5월27일(48시간) : 사전평가(5월19일) /사후평가(5월27일)
- 평가항목 (수준5): 사후 + 포트폴리오

### [v3.0.0](https://github.com/miniplugin/human/tree/v3.0.0) 화면구현 (2001020225_16v4)

- 5월27일~6월4일(48시간) : 사전평가(5월27일) /사후평가(6월4일)
- 평가항목(수준3) : 사후 + 포트폴리오

### [v4.0.0](https://github.com/miniplugin/human/tree/v4.0.0) 프로그래밍언어활용 (2001020215_15v3)

- 6월4일~6월18일(80시간) : 사전평가(6월4일) /사후평가(6월18일)
- 평가항목(수준3) : 사후 + 문제해결시나리오

### [v5.0.0](https://github.com/miniplugin/human/tree/v5.0.0) 통합구현 (2001020206_16v4)

- 6월18일~6월25일(40시간) : 사전평가(6월18일) /사후평가(6월25일)
- 평가항목(수준5) : 사후 + 문제해결시나리오

### [v6.0.0](https://github.com/miniplugin/human/tree/v6.0.0) UI구현 (2001020708_17v2)

- 6월25일~8월3일(216시간) : 사전평가(6월25일) /사후평가(8월3일)
- 평가항목(수준3) : 사후 + 포트폴리오

### [v7.0.0](https://github.com/miniplugin/human/tree/v7.0.0) SQL활용 (2001020413_16v3)

- 8월3일~8월6일(30시간) :  사전평가(8월3일) /사후평가(8월6일)
- 평가항목(수준3) : 사후 + 문제해결시나리오 + 서술형

### [v8.0.0](https://github.com/miniplugin/human/tree/v8.0.0) 서버프로그램 구현 (2001020211_16v4)

- 8월7일~8월18일(60시간) : 사전평가(8월7일) /사후평가(8월18일)
- 평가항목(수준5) : 사후 + 포트폴리오

### [v9.0.0](https://github.com/miniplugin/human/tree/v9.0.0) 인터페이스 구현 (2001020212_16v4)

- 8월18일~8월25일(40시간) : 사전평가(8월18일) /사후평가(8월24일)
- 평가항목(수준5) : 사후 + 문제해결시나리오

### 코로나19 영향으로 비대면 환경준비 때문에 2일 휴강 합니다.(8월27일~28일)

### [v10.0.0](https://github.com/miniplugin/human/tree/v10.0.0) 요구사항 확인 (2001020201_16v3)

- 8월25일~9월3일(40시간) : 사전평가(8월25일) /사후평가(9월3일)
- 평가항목(수준5) : 사후 + 평가자체크리스트

### [v11.0.0](https://github.com/miniplugin/human/tree/v11.0.0) 애플리케이션 설계 (2001020221_16v4)

- 9월3일~9월10일(40시간) : 사전평가(9월3일) /사후평가(9월10일)
- 평가항목(수준6) : 사후 + 평가자체크리스트 + 서술형

### [v12.0.0](https://github.com/miniplugin/human/tree/v12.0.0) 애플리케이션 테스트 수행 (2001020227_16v4)

- 9월10일~9월17일(40시간) : 사전평가(9월10일) /사후평가(9월17일)
- 평가항목(수준3) : 사후 + 문제해결시나리오

### [v13.0.0](https://github.com/miniplugin/human/tree/v13.0.0) 펌웨어 구현 (2001020314_17v5)

- 9월17일~9월24일(40시간) : 사전평가(9월17일) /사후평가(9월24일)
- 평가항목(수준5) : 사후 + 문제해결시나리오

### [v14.0.0](https://github.com/miniplugin/human/tree/v14.0.0) 디바이스 드라이버 구현 (2001020320_17v5)

- 9월24일~10월06일(40시간) : 사전평가(9월24일) /사후평가(10월06일)
- 평가항목(수준6) : 사후 + 문제해결시나리오

### [v15.0.0](https://github.com/miniplugin/human/tree/v15.0.0) 임베디드 애플리케이션 구현 (2001020324_17v5)

- 10월06일~10월14일(40시간) : 사전평가(10월06일) /사후평가(10월14일)
- 평가항목(수준5) : 사후 + 포트폴리오

### [v16.0.0](https://github.com/miniplugin/human/tree/v16.0.0) 네트워크 프로그래밍 구현 (2001020508_14v2)

- 10월14일~10월21일(48시간) : 사전평가(10월14일) /사후평가(10월21일)
- 평가항목(수준3) : 사후 + 포트폴리오

### 코로나19 영향으로 비대면 환경준비 때문에 2일 휴강 합니다.(8월27일~28일) 주) 아래 이미지는 반영되지 않은 이미지 입니다.
![ex_screenshot](./git_img/loadmap001.png)

### 교재별 소스 정보(아래)

---
- 스프링
#### 참고자료: https://github.com/miniplugin/edu_ora/blob/master/spring5.md
#### 예제소스: https://github.com/madvirus/spring5fs
#### 강사자료: http://blog.daum.net/web_design/search/%EC%8A%A4%ED%94%84%EB%A7%81%20%EC%9B%B9%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%EC%97%B0%EC%8A%B5
---

--- 
- 자바스크립트
#### 예제소스: http://www.webdongne.com/bbs/bbs/board.php?bo_table=wbook_list&wr_id=12
#### 맛보기(ebook): https://www.epubx.com/book/291
---

--- 
- 오라클
#### 예제소스: https://github.com/gilbutITbook/006696
#### 강사자료: http://blog.daum.net/web_design/725 (기존 스프링 웹프로젝트를 오라클용으로_1 )
---

--- 
- 이것이 자바다
#### 강사자료: 구글프레젠테이션 https://drive.google.com/file/d/1Ns6S2g7RNdrspqnGXwCfGnEEWJ3j3KOx/view?usp=sharing
#### 참고자료: https://www.youtube.com/playlist?list=PLVsNizTWUw7FPokuK8Cmlt72DQEt7hKZu
#### 예제소스: https://www.hanbit.co.kr/support/supplement_list.html
---

---
- C언어 
#### 강사자료: 구글프레젠테이션 https://drive.google.com/file/d/1uBq1FzFZyrc9T-gpU4S9W39rQL3gB6lC/view?usp=sharing
#### 참고자료: https://freelec.co.kr/lecture/c-%EC%96%B8%EC%96%B4%EC%9D%98-%EB%B3%B8%EC%A7%88%EC%9D%84-%ED%8C%8C%ED%97%A4%EC%B9%98%EB%8B%A4/
#### 예제소스: https://freelec.co.kr/datacenter/?mode=list&board_name=DataCenter2&order_by=fn_pid&order_type=desc&category1=&category2=&category3=&search_field=fn_title&search_text=C+%EC%96%B8%EC%96%B4+%EB%B3%B8%EC%83%89
#### C언어이론 실습은 구름클라우드에서 합니다: https://ide.goorm.io/
---

---
- 임베디드 리눅스
#### 임베디드 프로그램으로 할 수 있는 작업 예: https://www.youtube.com/watch?v=WayCRcelbTU 동영상 2분06초 부분에 내용 있음.
#### 안드로이드 스튜디오 + SDK 구글드라이브에서 다운로드: https://drive.google.com/file/d/17y9mVdJ6Isgom1AQKpoFi5WIPQkDvWN4/view?usp=sharing
#### 예제소스: [download this](git_img/Embeded-System-2019-2.zip)
#### 라즈베리 GPIO사용 하드웨어 제어: GCC컴파일 + wiringPi 라이브러리 사용 / http://blog.daum.net/ejleep1/search/wiringPi 
#### 참고자료: http://blog.naver.com/PostSearchList.nhn?blogId=tipsware&categoryNo=0&SearchText=%EB%9D%BC%EC%A6%88%EB%B2%A0%EB%A6%AC+%ED%8C%8C%EC%9D%B4+%EC%8B%A4%EC%8A%B5&orderBy=date&term=specific&startDate=2017-05-16&endDate=2017-05-23&range=all&cpage=2
#### 라즈베리안 설치 및 백업(복구) 소프트웨어(설치-Etcher,복구-Win32Diskmager)사용 : 라즈베리에서 제공하는 imager는 너무 느림. 
#### 라즈베리 설치 참고자료: https://blog.xcoda.net/82 / 라즈베리 백업 참고자료: https://withcoding.com/99
#### 라즈베리안 설치에 사용되는 Etcher 프로그램 다운로드 위치: https://www.balena.io/etcher/
#### 라즈베리안 다운로드 위치: https://www.raspberrypi.org/downloads/raspbian/
#### 라즈베리파이 초기 셋팅시 암호 apmsetup으로 변경 및 국가 한국어로 선택해서 마무리.
#### 와이파이 버그처리: 라즈베리 환경설정 메뉴에서 Localisation > Set WiFi Country 에서 GB Britain(UK)선택.
#### 인터넷이 활성화 되면, 터미널에서 sudo apt-get update 다음 sudo apt-get upgrade
#### 한글 깨져보인는 버그처리: 터미널에서 sudo apt-get install fonts-unfonts-core 여기까지 하고 reboot.
#### 한글 입력 않되는 버그처리: 터미널에서 sudo apt-get install fcitx 다음 sudo apt-get install fcitx-hangul
#### 한글 입력기가 나오지않는 버그처리: 터미널에서 im-config -n fcitx 후 reboot(기술참고: http://blog.naver.com/PostView.nhn?blogId=linuxni&logNo=221497654453 ) 
#### 라즈베리 바탕화면 Menu > Preferences > Raspberry Pi Configuration > Interfaces를 선택 SSH, VNC 활성화 후 학생PC에서 접속해 보기. PC에 VNC뷰어설치 https://www.realvnc.com/download/viewer/
---

---
- 아두이노
#### 예제소스: http://www.kwangmoonkag.co.kr/sub3/sub3_1.html?target=Board_List&DB=sub3_1&Mode=View&Num=852&page=1&S=S&val=0&Word=&Board_TYPE=&PHPSESSID=03901ac7ddf268e8562dfba0413f5f1a
#### 실습에 사용될 NODE MCU ESP8266보드 확인: http://makeshare.org/bbs/board.php?bo_table=project&wr_id=201
#### CP210x USB to UART Bridge 드라이버 설치하기(윈7용): http://www.iamamaker.kr/ko/tutorials/cp210x-usb-to-uart-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B2%84-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/
#### 윈7용 UART드라이버 다운로드: https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers
#### 아두이노 IDE(통합개발환경) 설치 파일 다운로드: https://www.arduino.cc/
#### NODE MCU개발환경구축하기: https://blog.naver.com/PostView.nhn?blogId=roboholic84&logNo=221187841348
#### LED_BUILTIN 깜박이기: https://developer.ibm.com/kr/cloud/internet-of-things/2017/07/30/esp8266-iot-arduino-ide-nodemcu-basic/
#### 참고사항 NODE MCU보드 강좌: https://blog.naver.com/PostSearchList.nhn?SearchText=NodeMCU+%EA%B0%95%EC%A2%8C&blogId=roboholic84
#### 강사자료(아두이노메가2560): http://blog.daum.net/_blog/search.do?coll_range=1&query1=%EC%95%84%EB%91%90%EC%9D%B4%EB%85%B8&searchtype=%24%7Bsearchtype%7D&page=%2Fsearch%2Fmy%2FsearchBlog.vm&frombn=2&searchpage=&sort=&blogid=0FnMj&articleno=&recommend=N&sortType=recency&enddate=&begindate=&period=&category=0&target=all
#### Do it! 안드로이드 앱 프로그래밍
- 2020.03.04. 전자책 출간 / 2020.02.21. 종이책 출간
- 무작정 따라하기 챕터3강의안(2015출판,안드로이드스튜디오2.3버전) : https://slidesplayer.org/slide/14087618/
- 저자카페: https://cafe.naver.com/techtown
- 저자깃: https://github.com/mike-jung/DoItAndroid
- 유투브채널: https://www.youtube.com/playlist?list=PLG7te9eYUi7sjJzJR2i5m6wv-X_7K2pVE
---

---
- NCS학습모듈 
#### 참고자료: https://ncs.go.kr/unity/th03/ncsSearchMain.do :/정보통신/정보기술/정보기술개발
#### 전자정부표준프레임웍3.9버전 개발환경 다운로드(아래 배포사이트) 
 https://www.egovframe.go.kr/EgovDevEnvRelease_300.jsp?menu=3&submenu=2&leftsub=2
#### 참고자료: Hello World MVC프로젝트 생성시 템플릿확인(아래) 
#### 참고자료: 템플릿:https://dist.springsource.com/release/STS/help/org.springframework.templates.mvc-3.2.2.zip
#### 참고자료: 위 템플릿 동시접속 문제로 보이지 않을때 다른 주소: http://timespace12.dothome.co.kr/org.springframework.templates.mvc-3.2.2.zip
#### 오픈JDK1.8다른버전: https://drive.google.com/open?id=1KmlDcLnqO5dLmAN64_a1sa7Ot9318yby
---

---
#### 학생PC 환경 
- 기본브라우저: 크롬 ( 설정: Flash플레이어 허용-교사 다음카페에 과제물제출을 위해서... )
- 다음카페 도움말: https://cs.daum.net/faq/36/4417.html?faqId=32547
- 과제물제출처: 교사 다음카페 ( http://cafe.daum.net/human20 ) 학생 카페가입 후 교사가 정회원처리 후 이용가능.
- 유스케이스 실습자료: [download this](git_img/usecase.jpg)
- 교사PC화면공유SW설치: https://drive.google.com/file/d/1H5efmROpNFm2zY33RgSx5jsETLI795Ga/view?usp=sharing
- UI디자인 & Development개발 가이드 샘플: https://drive.google.com/file/d/1JsAIwUItL2phlsXEwQ7yK-BOA7mbizJ-/view
- 학생작업샘플다운로드: https://drive.google.com/file/d/1TWohmhcdzOqY0P9mX1SmfmXVYcZTnrJo/view?usp=sharing 
- 화면구현 프로젝트 관리자단 home.html 디자인시안 : [보기](git_img/AdminLte_home.jpg)

#### 매달 초 자리바꾸기 공개용프로그램 자리이동.
- 변경기준: 자리바꾸기 공개용프로그램-주최자:교사(아래)
- [자리바꾸기 공개용프로그램 배포처 확인 링크](https://sciencelove.com/2353)
- 자리 이동 후 작업내용(git소스) 초기화 방법(아래)
- 이클립스에서 다른 학생의 기존 프로젝트 삭제
- 작업폴더 터미널에서 깃저장소 복제: git clone 본인 깃주소
- 이클립스에서 작업폴더에 프로젝트 임포트(import)
- 이클립스 메뉴에서 Window>Preferences>Team>Git>Configuration 에서 결과확인
- 이전과 동일하게 학생 본인 작업 시작
---

### 스프링 프로젝트 오라클 작업용 DB백업파일 다운로드(아래)
[download this](git_img/oracle_20200803.sql)

### 전자정부표준프레임워크 설계패키지정의서
[download this](git_img/egov_package.xls)

### RestAPI와 연동된 시각화 도구 (아래 오픈소스 사용)
[챠트예제 소스 download this](git_img/chart.html)

- 위 챠트소스에 적용된 내역은 아래와 같습니다.
- 챠트소스URL: https://www.chartjs.org/
- 라이센스정보: https://www.chartjs.org/docs/latest/notes/license.html (MIT라이센스)
- 막대챠트: https://www.chartjs.org/docs/latest/charts/bar.html
- 레이다챠트 : https://www.chartjs.org/docs/latest/charts/radar.html

### 프런트엔드 개발자용 코딩테스트 설명과 소스: 아래(취업 코딩테스트 대비용)
- [프런트엔드 개발자용 설명 download this](git_img/coding_test.txt)
- [프런트엔드 개발자용 코딩 download this](git_img/coding_test.zip)

### 비대면 수업시 필요한 프로그램 다운로드 목록(6개)
- 1. 이클립스 (egov.zip) 다운로드 위치 https://drive.google.com/file/d/1GnIzkvZNgVj-o4EbHzoy5WSDCEWk3GAx/view?usp=sharing
- 주) 반드시 C:\egov 에 압축을 풀어야 합니다. 
- 2. wamp 다운로드 위치 https://drive.google.com/file/d/1r2tUfV_eeYS2XhzXKabCZeEgeLP-LYL0/view?usp=sharing
- 주1), mysql root암호 apmsetup 으로 추가해 주셔야 합나다. 
```
1. 윈amp 작업표시줄의 아이콘 클릭 > phpMyAdmin > 로그인 후 > mysql 데이터베이스 user 테이블 선택 > root 선택 > 수정버튼 클릭
> authentication_string 필드 타입 password 선택 후 apmsetup 입력 후 실행 버튼 클릭
2. phpMyadmin 홈버튼 클릭 > 사용자 계정 탭메뉴 클릭 > 하단에 reload privileges 링크 클릭
3. 로그아웃 후 로그인 (root / apmsetup) 확인
```

  주2), 한글 입출력이 가능하게 my.ini 하단에 추가해 주셔야 합니다.
```
1. 윈amp 작업표시줄의 아이콘 클릭 > MySQL > my.ini 클릭 후 제일 하단에 아래 내용 추가
[client]
default-character-set=utf8
[mysqldump] 
default-character-set = utf8
[mysql]
default-character-set=utf8
[mysqld]
init_connect="SET collation_connection = utf8_general_ci"
init_connect="SET NAMES utf8"
character-set-server = utf8

```
- 한글 입출력 적용하시려면, 만세아이콘 정지 후 재시작 하시면 한글 입출력 적용이 됩니다.

- 3. 워크벤치(mysql용) 다운로드 위치 https://drive.google.com/file/d/1j1GUtVGrB0IFxYv4_57r1PeThiWqNfs7/view?usp=sharing
- 4. 안드로이드스튜디오.zip 다운로드 위치 https://drive.google.com/file/d/17y9mVdJ6Isgom1AQKpoFi5WIPQkDvWN4/view?usp=sharing
- 주) 반드시 C:\Android 에 압축을 풀어야 합니다.
- 5. 오라클서버 다운로드 위치 https://drive.google.com/file/d/1L2XZuH-j47PaoscLNn16kqjPxFYmhi_F/view?usp=sharing
- 주1) 오라클서버 설치하시기 전 이클립스에서 톰캣을 실행(자동포트 8080)하신 상태에서 설치하시면, 오라클서버 포트 바꾸는 수고를 하지 않아도 됩니다.
- 주2) 오라클 서버 설치시 포트번호를 9000 으로 잡아 주시면 됩니다. 또는 https://github.com/miniplugin/human/tree/v8.0.0 문서의 참고자료출처 부분에 해결책이 있습니다.
- 6. sql디벨러퍼(oracle용) 다운로드 위치 https://drive.google.com/file/d/1n7jy85OeI06ipmDjKWFYxaYpTJY16lj-/view?usp=sharing
- 7. 공통 주의) 여러 학생들 git 소스 에 .gitignore 에 root-context.xml와 servlet-context.xml 파일을 제외 시키는 코드가 있어서 누락된 파일이 존재 할 수 있습니다.
- Ps. 온라이 제안요청서 확인 https://www.smu.ac.kr/flexer/index.jsp?ftype=hwp&attachNo=467744
- Ps. 원격지원에 사용할 팀뷰어 프로그램 구글 드라이브 위치 입니다. https://drive.google.com/file/d/1NSj_qpwT35kA3ZUVKiZD9C7M6vTl2rgK/view?usp=sharing

#### 맥북(애플) 사용자를 위한 부트캠프로 윈도우OS 설치 후 멀티부팅을 사용해서 교육용 윈도우 개발환경과 같은 결과가 나오게 사용할 수 있습니다.
- 참조: https://m.blog.naver.com/PostView.nhn?blogId=aprilproj&logNo=220794261348&proxyReferer=https:%2F%2Fwww.google.com%2F
- 조건, 단 Mysql(한글설정)을 사용하기 위한 wamp 설치에서, mysql(3308로 변경)은 실행이 않되고, MariaDB(3306로 변경)를 사용하셔야 합니다. 상단에서 작업하는 스프링 프로젝트 2가지는 Mysql 과 Maria DB가 소스 수정없이 동일한 결과가 나옵니다.

#### 교실에서 줌 접속 테스트 했습니다. 실제 수업전 휴먼교육센터에서 카톡 오픈채팅방으로 학생들에게 접속주소를 안내할 예정 입니다.
- 오픈채팅방 주소 : https://open.kakao.com/o/gncB0Hsc

#### 스프링시큐리티 + SNS 로그인 구현 (스프링 Hsql 프로젝트 기준, 네이버 로그인 API사용)
- 기술정보: http://blog.naver.com/PostView.nhn?blogId=sam_sist&logNo=220969407741
- 우선 네이버 개발자 센터에서 API이용신청을 합니다. 이용신청하기링크: https://developers.naver.com/apps/#/register
- 1. pom.xml 에 의존성 추가

```
<!-- naver -->
		<dependency>
			<groupId>com.github.scribejava</groupId>
			<artifactId>scribejava-core</artifactId>
			<version>2.8.1</version>
		</dependency>
		<!-- naver 리턴값 json파싱 -->
		<dependency>
      <groupId>com.googlecode.json-simple</groupId>
      <artifactId>json-simple</artifactId>
      <version>1.1</version>
  </dependency>
```
- 2. util패키지에 NaverLoginApi.java 추가

```
import com.github.scribejava.core.builder.api.DefaultApi20;

public class NaverLoginApi extends DefaultApi20{

    protected NaverLoginApi(){
    }

    private static class InstanceHolder{
        private static final NaverLoginApi INSTANCE = new NaverLoginApi();
    }


    public static NaverLoginApi instance(){
        return InstanceHolder.INSTANCE;
    }

    @Override
    public String getAccessTokenEndpoint() {
        return "https://nid.naver.com/oauth2.0/token?grant_type=authorization_code";
    }                   

    @Override
    protected String getAuthorizationBaseUrl() {
        return "https://nid.naver.com/oauth2.0/authorize";
    }   

}
```
- 3. 컨트롤러 패키지에 NaverLoginController 추가

```
import java.io.IOException;
import java.util.UUID;

import javax.servlet.http.HttpSession;

import org.edu.util.NaverLoginApi;
import org.springframework.stereotype.Controller;
import org.springframework.util.StringUtils;

import com.github.scribejava.core.builder.ServiceBuilder;
import com.github.scribejava.core.model.OAuth2AccessToken;
import com.github.scribejava.core.model.OAuthRequest;
import com.github.scribejava.core.model.Response;
import com.github.scribejava.core.model.Verb;
import com.github.scribejava.core.oauth.OAuth20Service;

/*
 * 기술정보: http://blog.naver.com/PostView.nhn?blogId=sam_sist&logNo=220969407741 
 */

@Controller
public class NaverLoginController {
	/* 인증 요청문을 구성하는 파라미터 */
	//client_id: 애플리케이션 등록 후 발급받은 클라이언트 아이디
	//response_type: 인증 과정에 대한 구분값. code로 값이 고정돼 있습니다.
	//redirect_uri: 네이버 로그인 인증의 결과를 전달받을 콜백 URL(URL 인코딩). 애플리케이션을 등록할 때 Callback URL에 설정한 정보입니다.
	//state: 애플리케이션이 생성한 상태 토큰
	private final static String CLIENT_ID = "1mJg3VXr8DCW4xISOaPJ";
    private final static String CLIENT_SECRET = "Y**********";
    private final static String REDIRECT_URI = "http://127.0.0.1:8080/login_callback";
    private final static String SESSION_STATE = "oauth_state";
    /* 프로필 조회 API URL */
    private final static String PROFILE_API_URL = "https://openapi.naver.com/v1/nid/me";
    
    /* 네이버 아이디로 인증  URL 생성  Method */
    public String getAuthorizationUrl(HttpSession session) {

        /* 세션 유효성 검증을 위하여 난수를 생성 */
        String state = generateRandomString();
        /* 생성한 난수 값을 session에 저장 */
        setSession(session,state);        

        /* Scribe에서 제공하는 인증 URL 생성 기능을 이용하여 네아로 인증 URL 생성 */
        OAuth20Service oauthService = new ServiceBuilder()                                                   
                .apiKey(CLIENT_ID)
                .apiSecret(CLIENT_SECRET)
                .callback(REDIRECT_URI)
                .state(state) //앞서 생성한 난수값을 인증 URL생성시 사용함
                .build(NaverLoginApi.instance());

        return oauthService.getAuthorizationUrl();
    }

    /* 네이버아이디로 Callback 처리 및  AccessToken 획득 Method */
    public OAuth2AccessToken getAccessToken(HttpSession session, String code, String state) throws IOException{

        /* Callback으로 전달받은 세선검증용 난수값과 세션에 저장되어있는 값이 일치하는지 확인 */
        String sessionState = getSession(session);
        if(StringUtils.pathEquals(sessionState, state)){

            OAuth20Service oauthService = new ServiceBuilder()
                    .apiKey(CLIENT_ID)
                    .apiSecret(CLIENT_SECRET)
                    .callback(REDIRECT_URI)
                    .state(state)
                    .build(NaverLoginApi.instance());

            /* Scribe에서 제공하는 AccessToken 획득 기능으로 네아로 Access Token을 획득 */
            OAuth2AccessToken accessToken = oauthService.getAccessToken(code);
            return accessToken;
        }
        return null;
    }

    /* 세션 유효성 검증을 위한 난수 생성기 */
    private String generateRandomString() {
        return UUID.randomUUID().toString();
    }

    /* http session에 데이터 저장 */
    private void setSession(HttpSession session,String state){
        session.setAttribute(SESSION_STATE, state);     
    }

    /* http session에서 데이터 가져오기 */ 
    private String getSession(HttpSession session){
        return (String) session.getAttribute(SESSION_STATE);
    }
    /* Access Token을 이용하여 네이버 사용자 프로필 API를 호출 */
    public String getUserProfile(OAuth2AccessToken oauthToken) throws IOException{

        OAuth20Service oauthService =new ServiceBuilder()
                .apiKey(CLIENT_ID)
                .apiSecret(CLIENT_SECRET)
                .callback(REDIRECT_URI).build(NaverLoginApi.instance());

            OAuthRequest request = new OAuthRequest(Verb.GET, PROFILE_API_URL, oauthService);
        oauthService.signRequest(oauthToken, request);
        Response response = request.send();
        return response.getBody();
    }

}
```
- 4. HomeController.java 에 네이버 로그인 성공시 callback호출 메소드 추가 및 로그인jsp model변수 추가

```
@RequestMapping(value = "/login_callback", method = { RequestMethod.GET, RequestMethod.POST })
	public String callback(Model model, @RequestParam String code, @RequestParam String state, HttpSession session, RedirectAttributes rdat)
			throws IOException, ParseException {
		//System.out.println("여기는 callback");//디버그
		OAuth2AccessToken oauthToken;
        oauthToken = naverLoginController.getAccessToken(session, code, state);
        //로그인 사용자 정보를 읽어온다.
	    String apiResult = naverLoginController.getUserProfile(oauthToken);
		//model.addAttribute("result", apiResult);
	    
	    /* Json 데이터 파싱 시작 */
	    /** apiResult json 구조
	    {"resultcode":"00",
	    "message":"success",
	    "response":{"id":"33666449","nickname":"shinn****","age":"20-29","gender":"M","email":"sh@naver.com","name":"\uc2e0\ubc94\ud638"}}
	    **/
	    //String형식인 apiResult를 json형태로 바꿈
	    JSONParser parser = new JSONParser();
	    Object obj = parser.parse(apiResult);
	    JSONObject jsonObj = (JSONObject) obj;
	    //Top레벨 단계 _response 파싱
	    JSONObject response_obj = (JSONObject)jsonObj.get("response");
	    //response의 name값 파싱
	    String username = (String)response_obj.get("name");
	    String useremail = (String)response_obj.get("email");
	    //System.out.println(useremail);//디버그
	    String Status = (String)jsonObj.get("message");
	    //System.out.println("여기" + Status);//디버그
	    /* Json 데이터 파싱 끝 */
	    
	    //SNS로그인이 성공이라면
	    if(Status.equals("success")) {
		    /* 강제로 스프링 시큐리티 인증 처리 */
		    List<SimpleGrantedAuthority> authorities = new ArrayList<>();
	        authorities.add(new SimpleGrantedAuthority("ROLE_USER"));
	        Authentication authentication =  new UsernamePasswordAuthenticationToken(useremail, null, authorities);
	        SecurityContextHolder.getContext().setAuthentication(authentication);
	        
		    /* 로그인 세션 저장 */
			session.setAttribute("session_enabled", true);//인증확인
			session.setAttribute("session_userid", useremail);//사용자이메일
			session.setAttribute("session_levels", "ROLE_USER");//사용자권한
			session.setAttribute("session_username", username);//사용이이름
			rdat.addFlashAttribute("msg", "로그인");//result 데이터를 숨겨서 전송
	    } else {
	    	rdat.addFlashAttribute("param.msg", "fail");//result 데이터를 숨겨서 전송
	    	return "redirect:/login";//새로고침 자동 등록 방지를 위해서 아래처럼 처리
	    }
        /* 네이버 로그인 성공 페이지 View 호출 */
		return "redirect:/";//새로고침 자동 등록 방지를 위해서 아래처럼 처리
	}
 
 /**
	 * 로그인 페이지 파일 입니다.
	 */
	@RequestMapping(value = "/login", method = RequestMethod.GET)
	public String login(Locale locale, Model model, HttpSession session) {
		
		/* 네이버아이디로 인증 URL을 생성하기 위하여 naverLoginBO클래스의 getAuthorizationUrl메소드 호출 */
		String naverAuthUrl = naverLoginController.getAuthorizationUrl(session);
		
		//https://nid.naver.com/oauth2.0/authorize?response_type=code&client_id=sE***************&
		//redirect_uri=http%3A%2F%2F211.63.89.90%3A8090%2Flogin_project%2Fcallback&state=e68c269c-5ba9-4c31-85da-54c16c658125
		System.out.println("네이버:" + naverAuthUrl);
		
		//네이버 
		model.addAttribute("url", naverAuthUrl);

		return "login";
	}
 ```
 
 - 5. login.jsp 에 네이버 로그인 버튼 추가
 
 ```
 <script type="text/javascript" src="https://static.nid.naver.com/js/naverLogin_implicit-1.0.2.js" charset="utf-8"></script>
 
 <p class="btn_line">
  <!-- 네이버 로그인 화면으로 이동 시키는 URL -->
  <!-- 네이버 로그인 화면에서 ID, PW를 올바르게 입력하면 callback 메소드 실행 요청 -->
  <a href="${url}" class="btn_baseColor" style="background:green;width:200px;">네이버ID로 로그인</a>
 </p>
```
